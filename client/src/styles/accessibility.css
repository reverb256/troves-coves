
/* COMPREHENSIVE ACCESSIBILITY & HDR STYLES */

/* Font Size Scaling */
[data-font-size="large"] {
  font-size: 1.125em;
}

[data-font-size="extra-large"] {
  font-size: 1.25em;
}

/* Color Blind Support Filters */
[data-color-blind-mode="protanopia"] {
  filter: url('#protanopia-filter');
}

[data-color-blind-mode="deuteranopia"] {
  filter: url('#deuteranopia-filter');
}

[data-color-blind-mode="tritanopia"] {
  filter: url('#tritanopia-filter');
}

/* High Contrast Mode Overrides */
.high-contrast {
  --background: hsl(0 0% 100%);
  --foreground: hsl(0 0% 0%);
  --border: hsl(0 0% 0%);
}

.high-contrast * {
  color: hsl(0 0% 0%) !important;
  border-color: hsl(0 0% 0%) !important;
}

.high-contrast button,
.high-contrast input,
.high-contrast select,
.high-contrast textarea {
  background-color: hsl(0 0% 100%) !important;
  border: 3px solid hsl(0 0% 0%) !important;
  color: hsl(0 0% 0%) !important;
}

.high-contrast .bg-gradient-to-r,
.high-contrast .bg-gradient-to-br,
.high-contrast .bg-gradient-to-l,
.high-contrast [class*="bg-gradient"] {
  background: hsl(0 0% 100%) !important;
}

/* Enhanced Focus Indicators */
.focus-enhanced:focus,
button:focus,
input:focus,
select:focus,
textarea:focus,
a:focus {
  outline: 4px solid hsl(43 100% 40%) !important;
  outline-offset: 2px !important;
  box-shadow: 
    0 0 0 2px hsl(0 0% 100%),
    0 0 0 8px hsl(43 100% 40%),
    0 0 20px hsla(43 100% 40% / 0.3) !important;
  position: relative;
  z-index: 100;
}

/* Skip Links for Screen Readers */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: hsl(0 0% 0%);
  color: hsl(0 0% 100%);
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-weight: bold;
}

.skip-link:focus {
  top: 6px;
}

/* Screen Reader Only Content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* HDR Wide Gamut Support */
@supports (color: color(display-p3 1 0 0)) {
  .hdr-enhanced {
    color: color(display-p3 0 0 0);
  }
  
  .hdr-troves {
    color: color(display-p3 0.078 0.722 0.647);
  }
  
  .hdr-gold {
    color: color(display-p3 0.918 0.722 0.376);
  }
  
  .hdr-background {
    background: linear-gradient(135deg, 
      color(display-p3 0.988 0.976 0.953),
      color(display-p3 0.976 0.988 0.976)
    );
  }
}

/* Motion Sensitivity */
.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Touch Target Improvements */
@media (pointer: coarse) {
  button,
  input,
  select,
  textarea,
  a {
    min-height: 44px;
    min-width: 44px;
    padding: 12px;
  }
}

/* ARIA Live Region Styling */
[aria-live] {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

[aria-live="polite"]:not(:empty),
[aria-live="assertive"]:not(:empty) {
  position: static;
  width: auto;
  height: auto;
  padding: 12px;
  background: hsl(43 90% 95%);
  border: 2px solid hsl(43 90% 60%);
  border-radius: 4px;
  margin: 8px 0;
}

/* Error State Improvements */
[aria-invalid="true"] {
  border: 3px solid hsl(0 85% 45%) !important;
  background-color: hsl(0 85% 98%) !important;
}

[aria-invalid="true"]:focus {
  outline: 4px solid hsl(0 85% 45%) !important;
  box-shadow: 0 0 0 8px hsla(0 85% 45% / 0.3) !important;
}

/* Loading State Accessibility */
[aria-busy="true"] {
  position: relative;
}

[aria-busy="true"]::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: hsla(0 0% 100% / 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

/* Progress Indicator Styling */
[role="progressbar"] {
  background: hsl(0 0% 90%);
  border-radius: 4px;
  overflow: hidden;
  height: 8px;
  position: relative;
}

[role="progressbar"]::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: hsl(174 70% 45%);
  width: var(--progress-value, 0%);
  transition: width 0.3s ease;
}
